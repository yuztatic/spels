REST API REPRESENTATIONAL STATE TRANSFER APPLICATION PROGRAMMING PROGRAMMING INTERFACE
END POINT

mas pinasimple ng code igniter
isang route lang

to see is to believe

app\config\routes.php

 $routes->setDefaultnamespace('App\Controllers');
$routes->setDefaultController('Home');
$routes->setDefaultMethod('index');
$routes->setTranslateURIDashes(false);
$routes->set404Override();


$routes->get('/', 'Home::index');

$routes->resource('offices',['controller' => 'OfficeController', 'except' => 'new, edit']);
$routes->resource('tickets',['controller' => 'TicketController', 'except' => 'new, edit']);


//create new resource route except new and edit

service('auth')->routes($routes);


crud na tayo
sa controller dapat extends resource controller hindi base controller

use CodeIgniter\HTTP\ResponseInterface;
use CodeIgniter\RESTful\ResourceController;
use CodeIgniter\http\Response;


public function create()
    {
        $officeModel= new \App\Models\Office();
        $data=$this->request->getPost();// eto yung lahat ng data galing sa client

        //trap
        if(!$officeModel->validate($data)){ //if not true false, meaning may error return response to user
                $response= array(
                    'status'=>'error',
                    'message'=>$officeModel->errors()
                );

                return $this->response->setStatusCode(Response::HTTP_BAD_REQUEST)->setJSON($response);
                //return agad if may error

        }
        $officeModel->insert($data);
        $response= array(
            'status'=>'success',
            'message'=>'Office created successfully'
        );

        return $this->response->setStatusCode(Response::HTTP_CREATED)->setJSON($response);
        //IF WALA ERROR SAVE NANG DATA


if ok na test sa thunderclient
    }

    -----------------------------
    show naman

     public function show($id = null)
    {
        $officeModel= new \App\Models\Office();
        $data=$officeModel->find($id);

        if(!$data){
                $response= array(
                    'status'=>'error',
                    'message'=>'Office not found'
                );
                // return $this->response->setStatusCode(Response::HTTP_NOT_FOUND);
                return $this->response->setStatusCode(Response::HTTP_NOT_FOUND)->setJSON($response);

        }

        return $this->response->setStatusCode(Response::HTTP_OK)->setJSON($data);
    }
